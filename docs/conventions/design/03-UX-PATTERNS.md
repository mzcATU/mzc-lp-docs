# 03. UX Patterns

> Frontend UX 패턴 가이드 - 상태 피드백, 사용자 플로우

---

## 핵심 규칙

```
✅ 모든 비동기 작업에 로딩 상태 표시
✅ 에러 발생 시 명확한 메시지와 복구 방법 제공
✅ 빈 상태에 안내 메시지와 다음 액션 제시
✅ 성공 시 토스트 또는 인라인 피드백 제공
✅ 사용자 플로우는 3단계 이내로 단순화
```

---

## 1. 상태 피드백 패턴

### 1.1 로딩 상태

#### 패턴

| 상황 | UI 패턴 | 예시 |
|------|---------|------|
| 페이지 로딩 | Skeleton UI | 목록, 대시보드 |
| 버튼 액션 | Spinner + 비활성화 | 저장, 삭제 |
| 데이터 갱신 | 인라인 Spinner | 새로고침 |
| 파일 업로드 | Progress Bar | 업로드 진행률 |

#### 와이어프레임

```
┌─────────────────────────────────────────┐
│  [Skeleton Loading]                     │
│  ┌─────────────────────────────────┐    │
│  │ ████████████████                │    │
│  │ ████████                        │    │
│  │ ████████████████████            │    │
│  └─────────────────────────────────┘    │
│  ┌─────────────────────────────────┐    │
│  │ ████████████████                │    │
│  │ ████████                        │    │
│  └─────────────────────────────────┘    │
└─────────────────────────────────────────┘
```

```
┌────────────────────┐    ┌────────────────────┐
│   [저장]           │ →  │   [◌ 저장 중...]   │
│   (활성 상태)      │    │   (비활성 상태)    │
└────────────────────┘    └────────────────────┘
```

#### 코드 예시

```tsx
// Skeleton 로딩
{isLoading ? (
  <div className="space-y-4">
    <Skeleton className="h-12 w-full" />
    <Skeleton className="h-12 w-full" />
    <Skeleton className="h-12 w-3/4" />
  </div>
) : (
  <DataList data={data} />
)}

// 버튼 로딩
<Button disabled={isSubmitting}>
  {isSubmitting ? (
    <>
      <Spinner className="mr-2" />
      저장 중...
    </>
  ) : '저장'}
</Button>
```

---

### 1.2 에러 처리

#### 패턴

| 에러 유형 | UI 패턴 | 복구 방법 |
|----------|---------|----------|
| 네트워크 오류 | 전체 화면 에러 | 재시도 버튼 |
| 유효성 검사 | 인라인 메시지 | 필드 하이라이트 |
| 권한 오류 | 토스트 + 리다이렉트 | 로그인 페이지 이동 |
| 서버 오류 | 에러 페이지 | 홈으로 이동 |

#### 와이어프레임

```
┌─────────────────────────────────────────┐
│  [Error State]                          │
│                                         │
│            ⚠️                           │
│                                         │
│     데이터를 불러올 수 없습니다.         │
│     네트워크 연결을 확인해주세요.         │
│                                         │
│         [ 다시 시도 ]                    │
│                                         │
└─────────────────────────────────────────┘
```

```
┌─────────────────────────────────────────┐
│  이름 *                                 │
│  ┌─────────────────────────────────┐    │
│  │                                 │ ⚠  │
│  └─────────────────────────────────┘    │
│  ⚠️ 이름을 입력해주세요.                 │
└─────────────────────────────────────────┘
```

#### 코드 예시

```tsx
// 전체 화면 에러
{error && (
  <div className="flex flex-col items-center justify-center h-64">
    <AlertTriangle className="w-12 h-12 text-status-error" />
    <p className="mt-4 text-text-secondary">{error.message}</p>
    <Button onClick={refetch} className="mt-4">
      다시 시도
    </Button>
  </div>
)}

// 인라인 에러
<Input
  {...register('name')}
  className={cn(errors.name && 'border-status-error')}
/>
{errors.name && (
  <p className="text-sm text-status-error mt-1">
    {errors.name.message}
  </p>
)}
```

---

### 1.3 빈 상태 (Empty State)

#### 패턴

| 상황 | 메시지 | 액션 |
|------|--------|------|
| 검색 결과 없음 | "검색 결과가 없습니다" | 검색어 수정 안내 |
| 목록 비어있음 | "등록된 항목이 없습니다" | 추가 버튼 |
| 필터 결과 없음 | "조건에 맞는 항목이 없습니다" | 필터 초기화 |

#### 와이어프레임

```
┌─────────────────────────────────────────┐
│  [Empty State]                          │
│                                         │
│            📂                           │
│                                         │
│     등록된 강의가 없습니다.              │
│     새 강의를 만들어보세요.              │
│                                         │
│         [ + 강의 만들기 ]                │
│                                         │
└─────────────────────────────────────────┘
```

#### 코드 예시

```tsx
{data?.length === 0 && (
  <div className="flex flex-col items-center justify-center py-16">
    <FolderOpen className="w-16 h-16 text-text-tertiary" />
    <h3 className="mt-4 text-lg font-medium">
      등록된 강의가 없습니다
    </h3>
    <p className="mt-2 text-text-secondary">
      새 강의를 만들어보세요.
    </p>
    <Button onClick={handleCreate} className="mt-4">
      + 강의 만들기
    </Button>
  </div>
)}
```

---

### 1.4 성공 피드백

#### 패턴

| 액션 | 피드백 방식 | 지속 시간 |
|------|------------|----------|
| 저장 완료 | 토스트 | 3초 |
| 삭제 완료 | 토스트 + 목록 갱신 | 3초 |
| 생성 완료 | 페이지 이동 + 토스트 | 3초 |
| 업로드 완료 | 인라인 체크 표시 | 유지 |

#### 와이어프레임

```
┌─────────────────────────────────────────┐
│                                         │
│                           ┌───────────┐ │
│                           │ ✅ 저장됨  │ │
│                           └───────────┘ │
│                                         │
│  [페이지 콘텐츠]                         │
│                                         │
└─────────────────────────────────────────┘
```

#### 코드 예시

```tsx
// sonner 토스트 사용
import { toast } from 'sonner';

const handleSave = async () => {
  try {
    await saveMutation.mutateAsync(data);
    toast.success('저장되었습니다.');
  } catch (error) {
    toast.error('저장에 실패했습니다.');
  }
};

// 생성 후 페이지 이동
const handleCreate = async () => {
  const result = await createMutation.mutateAsync(data);
  toast.success('강의가 생성되었습니다.');
  navigate(`/tu/teaching/courses/${result.data.courseId}`);
};
```

---

## 2. 사용자 플로우 패턴

### 2.1 페이지 전환 흐름

#### 기본 패턴

```
[목록 페이지] → [상세 페이지] → [수정 페이지]
      ↑              ↓              ↓
      └──────────────┴──────────────┘
              (뒤로가기/취소)
```

#### 브레드크럼 표시

```
홈 > 강의 관리 > 강의 상세 > 수정
```

---

### 2.2 폼 제출 흐름

```
┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│   입력      │ →   │   검증      │ →   │   제출      │
│             │     │             │     │             │
│  사용자가   │     │  클라이언트 │     │  서버로     │
│  데이터 입력│     │  유효성 검사│     │  데이터 전송│
└─────────────┘     └─────────────┘     └─────────────┘
                          ↓                    ↓
                    ┌─────────────┐     ┌─────────────┐
                    │   에러 표시  │     │   성공 처리  │
                    │             │     │             │
                    │  인라인     │     │  토스트 +   │
                    │  에러 메시지│     │  페이지 이동│
                    └─────────────┘     └─────────────┘
```

#### 코드 예시

```tsx
const onSubmit = async (data: FormData) => {
  // 1. 검증 (react-hook-form이 자동 처리)

  // 2. 제출
  try {
    await mutation.mutateAsync(data);

    // 3. 성공 처리
    toast.success('저장되었습니다.');
    navigate('/list');
  } catch (error) {
    // 3. 에러 처리
    if (error.response?.status === 400) {
      // 서버 유효성 에러
      setError('field', { message: error.response.data.message });
    } else {
      toast.error('저장에 실패했습니다.');
    }
  }
};
```

---

### 2.3 CRUD 흐름

#### 생성 (Create)

```
[목록] → [+ 버튼] → [생성 폼] → [저장] → [상세 페이지]
                                   ↓
                              [에러 시 폼 유지]
```

#### 조회 (Read)

```
[목록] → [항목 클릭] → [상세 페이지]
```

#### 수정 (Update)

```
[상세] → [수정 버튼] → [수정 폼] → [저장] → [상세 페이지]
                                     ↓
                                [에러 시 폼 유지]
```

#### 삭제 (Delete)

```
[목록/상세] → [삭제 버튼] → [확인 다이얼로그] → [삭제] → [목록]
                                   ↓
                              [취소 시 현재 유지]
```

#### 삭제 확인 다이얼로그

```
┌─────────────────────────────────────────┐
│  삭제 확인                        [X]   │
├─────────────────────────────────────────┤
│                                         │
│  "React 기초 강의"를 삭제하시겠습니까?   │
│  이 작업은 되돌릴 수 없습니다.           │
│                                         │
├─────────────────────────────────────────┤
│              [ 취소 ]  [ 삭제 ]         │
└─────────────────────────────────────────┘
```

---

## 3. 체크리스트

### 새 기능 추가 시

- [ ] 로딩 상태 처리
- [ ] 에러 상태 처리
- [ ] 빈 상태 처리
- [ ] 성공 피드백 추가
- [ ] 사용자 플로우 3단계 이내 확인

### 폼 구현 시

- [ ] 클라이언트 유효성 검사
- [ ] 서버 에러 처리
- [ ] 제출 중 버튼 비활성화
- [ ] 성공/실패 피드백

### 목록 페이지 구현 시

- [ ] Skeleton 로딩
- [ ] 빈 상태 UI
- [ ] 에러 상태 + 재시도
- [ ] 페이지네이션/무한스크롤

---

## 관련 문서

- [00-DESIGN-CONVENTIONS](./00-DESIGN-CONVENTIONS.md) - 디자인 구현 컨벤션
- [04-UX-PAGES](./04-UX-PAGES.md) - 페이지별 UX 가이드
- [05-UX-COMPONENTS](./05-UX-COMPONENTS.md) - 컴포넌트별 UX 가이드
